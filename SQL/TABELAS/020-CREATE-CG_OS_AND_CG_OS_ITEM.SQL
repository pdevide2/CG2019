CREATE TABLE CG_OS (
ID_OS INT NOT NULL PRIMARY KEY,
DATA_MOVTO DATETIME NOT NULL,
ID_LOJA_ORIGEM INT NOT NULL,
NF_TRANSP VARCHAR(10) NULL,
SERIE_NF_TRANSP VARCHAR(10) NULL,
EMISSAO_NF_TRANSP DATETIME NULL,
ID_FORNECEDOR INT NOT NULL,
ID_RESPONSAVEL_IDA INT NULL,
STATUS_OS INT NOT NULL DEFAULT(1),
USER_INS INT NULL,
DATA_INS DATETIME NULL,
USER_UPD INT NULL,
DATA_UPD DATETIME NULL,
XML_NF_TRANSP xml NULL,
XML_NF_TS xml NULL
)
GO

CREATE TABLE CG_OS_ITEM (
ID_OS INT NOT NULL,
ITEM_ID INT NOT NULL,
ID_EQUIPAMENTO INT NOT NULL,
DESC_EQUIPAMENTO VARCHAR(50) NOT NULL,
SERIE VARCHAR(30) NULL,
MODELO VARCHAR(30) NULL,
PROTOCOLO VARCHAR(30) NULL,
PREVISAO_RETORNO DATETIME NULL,
DATA_RETORNO DATETIME NULL,
DESC_DEFEITO VARCHAR(250) NULL,
CONSERTO_OK BIT NOT NULL DEFAULT(0), 
NF_FORNEC VARCHAR(10) NULL,
SERIE_NF_FORNEC VARCHAR(10) NULL,
EMISSAO_NF_FORNEC DATETIME NULL,
OBS_RETORNO TEXT NULL,
ID_RESPONSAVEL_RET INT NULL,
XML_NF_FORNEC xml NULL,
LAUDO_FORNEC image NULL,
USER_INS INT NULL,
DATA_INS DATETIME NULL,
USER_UPD INT NULL,
DATA_UPD DATETIME NULL
)
GO

ALTER TABLE CG_OS_ITEM 
ADD PRIMARY KEY (ID_OS, ITEM_ID, ID_EQUIPAMENTO)
GO
